{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Title
      {% endblock %}
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" />
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />

  </head>
  <body class="bg-gray-100">
    <!-- Navbar -->
    <nav id="header" class="fixed w-full z-40 top-0">
      <div id="progress" class="h-1 z-20 top-0" style="background:linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0);"></div>

      <div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 pt-1 pb-2">
        <div class="pl-4">
          <a class="text-green-500 text-base no-underline hover:no-underline font-extrabold text-xl" href="{% url 'home' %}">WhoAsk</a>
        </div>

        <div class="block lg:hidden pr-4">
          <button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none">
            <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <title>Menu</title>
              <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
            </svg>
          </button>
        </div>

        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id="nav-content">
          <ul class="list-reset lg:flex justify-end flex-1 items-center">
            {% if user.is_authenticated %}
              <li class="mr-3">
                <div class="relative flex items-center">
                  <input type="text" placeholder="Tìm kiếm..." class="border rounded-full px-4 py-2 w-64 focus:outline-none" />
                  <button class="absolute right-2 text-gray-600 hover:text-gray-900">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M12.9 14.32a8 8 0 111.42-1.42l4.38 4.38a1 1 0 01-1.42 1.42l-4.38-4.38zM8 14a6 6 0 100-12 6 6 0 000 12z" />
                    </svg>
                  </button>
                </div>
              </li>
              <li class="mr-3">
                <button class="text-gray-600 hover:text-gray-900">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 2a6 6 0 00-6 6v4H3a1 1 0 000 2h14a1 1 0 000-2h-1V8a6 6 0 00-6-6zm-1 16a2 2 0 004 0H9z" />
                  </svg>
                </button>
              </li>
              <li class="mr-3">
                <a href="#" class="bg-green-500 text-gray-100 px-4 py-2 rounded-full font-semibold hover:bg-gray-200 hover:text-green-500">Đăng bài</a>
              </li>
            {% endif %}
            <li>
              {% if user.is_authenticated %}
                <a href="{% url 'profile' profile_id=user.profile.id %}"><img class="h-12 w-12 rounded-full" src="{{ user.profile.avatar.url|default:'/static/default-avatar.png' }}" alt="User Avatar" /></a>
              {% else %}
                <a class="button flex items-center justify-center rounded-full bg-green-500 text-white font-semibold px-4 py-2.5 text-body-xs" href="/users/login">ĐĂNG NHẬP</a>
              {% endif %}
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="mt-20 z-0">
      {% block content %}

      {% endblock %}
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-400">
      <div class="container max-w-4xl mx-auto flex py-8">
        <div class="w-full mx-auto flex flex-wrap">
          <div class="flex w-full md:w-1/2">
            <div class="px-8">
              <h3 class="font-bold text-gray-900">About</h3>
              <p class="py-4 text-gray-600 text-sm">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas vel mi ut felis tempus commodo nec id erat. Suspendisse consectetur dapibus velit ut lacinia.</p>
            </div>
          </div>

          <div class="flex w-full md:w-1/2">
            <div class="px-8">
              <h3 class="font-bold text-gray-900">Social</h3>
              <ul class="list-reset items-center text-sm pt-3">
                <li>
                  <a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-1" href="#">Add social link</a>
                </li>
                <li>
                  <a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-1" href="#">Add social link</a>
                </li>
                <li>
                  <a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-1" href="#">Add social link</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>
      /* Progress bar */
      //Source: https://alligator.io/js/progress-bar-javascript-css-variables/
      var h = document.documentElement,
        b = document.body,
        st = 'scrollTop',
        sh = 'scrollHeight',
        progress = document.querySelector('#progress'),
        scroll
      var scrollpos = window.scrollY
      var header = document.getElementById('header')
      var navcontent = document.getElementById('nav-content')
      
      document.addEventListener('scroll', function () {
        /*Refresh scroll % width*/
        scroll = ((h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight)) * 100
        progress.style.setProperty('--scroll', scroll + '%')
      
        /*Apply classes for slide in bar*/
        scrollpos = window.scrollY
      
        if (scrollpos > 0) {
          header.classList.add('bg-white')
          header.classList.add('shadow')
          navcontent.classList.remove('bg-gray-100')
          navcontent.classList.add('bg-white')
        } else {
          header.classList.remove('bg-white')
          header.classList.remove('shadow')
          navcontent.classList.remove('bg-white')
          navcontent.classList.add('bg-gray-100')
        }
      })
      
      //Javascript to toggle the menu
      document.getElementById('nav-toggle').onclick = function () {
        document.getElementById('nav-content').classList.toggle('hidden')
      }
    </script>
  </body>
</html>
